<html><head></head><body>
  <div>
      <button onclick="init()">Click me</button>
  </div>
  <div>
    <canvas id="canvas" width="600" height="400"></canvas>
  </div>


<script>
var x=0;
var y=0;
var z=0;
var decalage=0;
var CLOCK=25;
let object1 = [];
let object2 = [];
var stockage1_place = 0;
var stockage1_place_m = 0;
let stockage1_set = [];
let convoyor1_set = [];

function init(){
  x=0;
  y=100;
  width = 10;
  length = 10;
  decalage=30;
  object1 = [x, y, width, length];
  object2 = [x, y+decalage, width, length];
  
  convoyor1_set[0, 110, 200, 3, 'purple'];
  
  stockage1_set[220, 80, 12, 50, 'red'];
  stockage1_place_m = stockage1_set[2]/width+stockage1_set[3]/length
  stokage1 = 0;
}

function animation(){
  document.getElementById('canvas')
    var ctx = document.getElementById('canvas').getContext('2d'); 
      
      requestAnimationFrame(convoyor1);
      requestAnimationFrame(stokage1);
  

  setTimeout(function(){animation()},CLOCK);

  function convoyor1(){
  document.getElementById('canvas')
    var ctx = document.getElementById('canvas').getContext('2d'); 
  if (object1<200 && object2<200)
  {   
      object1[0]+=2;
      ctx.fillStyle = 'green';  
      ctx.fillRect(object1[0], object1[1], object1[2], object1[3]); 
      
      object2[0]+=2;  
      ctx.fillStyle = 'blue'; 
      ctx.fillRect(object2[0], object2[1], object2[2], object2[3]);
  }
        ctx.fillStyle = convoyor1_set[4];
        ctx.fillRect(convoyor1_set[0], convoyor1_set[1] , convoyor1_set[2], convoyor1_set[3]);
  }
  function stokage1(){
  let i = 0;
  if (stockage1_place<stockage1_place_m)
  {
    if (object1[0]==stockage1_set[0]-20)
    {
        object1[0]=stockage1_set[0]+2
        object1[1]=stockage1_set[1]+stokage1_place*11+2
        stokage1_place++;
    }

    if (object2[0]==stockage1_set[0]-20)
    {
        object2[0]=stockage1_set[0]+2
        object2[1]=stockage1_set[1]+stokage1_place*11+2
        stokage1_place++;
    }
  }
  ctx.strokeStyle = 'rgb(200, 0, 0)';
  ctx.fillRect(object1[0], object1[1], object1[2], object1[3]);
  ctx.fillRect(object2[0], object2[1], object2[2], object2[3]);
        ctx.strokeStyle = stockage1_set[4];
        ctx.strokeRect(stockage1_set[0], stockage1_set[1], stockage1_set[2], stockage1_set[3]);

}

}
window.onload = init;
window.requestAnimationFrame(animation);

</script>

</body></html>